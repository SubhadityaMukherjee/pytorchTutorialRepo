!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("@lumino/algorithm"),require("@lumino/collections")):"function"==typeof define&&define.amd?define(["exports","@lumino/algorithm","@lumino/collections"],n):n((e=e||self).lumino_messaging={},e.lumino_algorithm,e.lumino_collections)}(this,(function(e,n,t){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */var o=function(e,n){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t])})(e,n)};var r=function(){function e(e){this.type=e}return Object.defineProperty(e.prototype,"isConflatable",{get:function(){return!1},enumerable:!0,configurable:!0}),e.prototype.conflate=function(e){return!1},e}(),i=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return function(e,n){function t(){this.constructor=e}o(e,n),e.prototype=null===n?Object.create(n):(t.prototype=n.prototype,new t)}(n,e),Object.defineProperty(n.prototype,"isConflatable",{get:function(){return!0},enumerable:!0,configurable:!0}),n.prototype.conflate=function(e){return!0},n}(r);!function(e){function o(e,t){var o=i.get(e);o&&0!==o.length?n.every(n.retro(o),(function(n){return!n||function(e,n,t){var o=!0;try{o="function"==typeof e?e(n,t):e.messageHook(n,t)}catch(e){u(e)}return o}(n,e,t)}))&&p(e,t):p(e,t)}e.sendMessage=o,e.postMessage=function(e,t){t.isConflatable&&n.some(r,(function(n){return n.handler===e&&(!!n.msg&&(n.msg.type===t.type&&(!!n.msg.isConflatable&&n.msg.conflate(t))))}))||m(e,t)},e.installMessageHook=function(e,n){var t=i.get(e);t&&-1!==t.indexOf(n)||(t?t.push(n):i.set(e,[n]))},e.removeMessageHook=function(e,n){var t=i.get(e);if(t){var o=t.indexOf(n);-1!==o&&(t[o]=null,d(t))}},e.clearData=function(e){var t=i.get(e);t&&t.length>0&&(n.ArrayExt.fill(t,null),d(t)),n.each(r,(function(n){n.handler===e&&(n.handler=null,n.msg=null)}))},e.flush=function(){c||0===l||(s(l),c=!0,g(),c=!1)},e.getExceptionHandler=function(){return u},e.setExceptionHandler=function(e){var n=u;return u=e,n};var r=new t.LinkedList,i=new WeakMap,a=new Set,u=function(e){console.error(e)},l=0,c=!1,f="function"==typeof requestAnimationFrame?requestAnimationFrame:setImmediate,s="function"==typeof cancelAnimationFrame?cancelAnimationFrame:clearImmediate;function p(e,n){try{e.processMessage(n)}catch(e){u(e)}}function m(e,n){r.addLast({handler:e,msg:n}),0===l&&(l=f(g))}function g(){if(l=0,!r.isEmpty){var e={handler:null,msg:null};for(r.addLast(e);;){var n=r.removeFirst();if(n===e)return;n.handler&&n.msg&&o(n.handler,n.msg)}}}function d(e){0===a.size&&f(y),a.add(e)}function y(){a.forEach(h),a.clear()}function h(e){n.ArrayExt.removeAllWhere(e,v)}function v(e){return null===e}}(e.MessageLoop||(e.MessageLoop={})),e.ConflatableMessage=i,e.Message=r,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=index.min.js.map